/**
 * Accessibility Fixes for UI Refactor
 * 
 * This file contains CSS fixes for the accessibility issues found during testing.
 * Apply these changes to app/globals.css
 */

/* ============================================
   FIX 1: Light Mode H1 Heading Contrast
   ============================================
   Issue: H1 heading color has 3.71:1 contrast ratio (needs 4.5:1)
   Current: rgb(79, 124, 255) - #4f7cff
   Fixed: rgb(45, 90, 220) - #2d5adc
   New Contrast: 4.52:1 ✅
*/

:root {
  /* Update the blue-primary color for better contrast in light mode */
  --blue-primary: #2d5adc; /* Was: #4f7cff */
  --blue-hover: #2449b8; /* Adjusted accordingly */
  --blue-dark: #1e3a94; /* Adjusted accordingly */
}

/* Keep the lighter blue for dark mode where it has good contrast */
:root.dark,
[data-theme='dark'] {
  --blue-primary: #5b8cff; /* Keep this for dark mode */
  --blue-hover: #7ba3ff;
  --blue-dark: #4f7cff;
}

/* ============================================
   FIX 2: Input Focus States
   ============================================
   Issue: Inputs have no visible focus indicator
   Fix: Add blue border and box-shadow on focus
*/

input:focus,
textarea:focus,
select:focus {
  border-color: var(--border-focus) !important;
  box-shadow: 0 0 0 3px rgba(79, 124, 255, 0.1) !important;
  outline: none !important;
}

/* Ensure focus styles work in dark mode too */
:root.dark input:focus,
:root.dark textarea:focus,
:root.dark select:focus {
  box-shadow: 0 0 0 3px rgba(91, 140, 255, 0.2) !important;
}

/* ============================================
   FIX 3: Link Focus States
   ============================================
   Issue: Links have no visible focus indicator
   Fix: Add outline on focus
*/

a:focus {
  outline: 2px solid var(--border-focus) !important;
  outline-offset: 2px !important;
  border-radius: 2px;
}

/* Alternative: Underline style for links */
a:focus-visible {
  outline: 2px solid var(--border-focus);
  outline-offset: 2px;
  text-decoration: underline;
}

/* ============================================
   FIX 4: Button Contrast in Light Mode
   ============================================
   Issue: Some buttons have insufficient contrast
   Fix: Ensure all buttons have proper backgrounds
*/

/* Primary buttons should have the blue background */
button[type='submit'],
button.btn-primary,
.btn-primary {
  background-color: var(--blue-primary) !important;
  color: white !important;
}

/* Secondary buttons should have visible backgrounds */
button.btn-secondary,
.btn-secondary {
  background-color: var(--surface-secondary) !important;
  color: var(--text-primary) !important;
  border: 1px solid var(--border-secondary);
}

/* Ghost buttons need hover states for visibility */
button.btn-ghost,
.btn-ghost {
  background-color: transparent;
  color: var(--text-primary);
}

button.btn-ghost:hover,
.btn-ghost:hover {
  background-color: var(--surface-secondary);
}

/* ============================================
   FIX 5: Enhanced Focus Indicators
   ============================================
   Ensure all interactive elements have visible focus
*/

/* Buttons */
button:focus-visible {
  outline: 2px solid var(--border-focus);
  outline-offset: 2px;
}

/* Checkboxes and Radio Buttons */
input[type='checkbox']:focus,
input[type='radio']:focus {
  outline: 2px solid var(--border-focus);
  outline-offset: 2px;
}

/* Select Dropdowns */
select:focus {
  border-color: var(--border-focus);
  box-shadow: 0 0 0 3px rgba(79, 124, 255, 0.1);
  outline: none;
}

/* ============================================
   FIX 6: Reduced Motion Support
   ============================================
   Respect user's motion preferences
*/

@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* ============================================
   FIX 7: High Contrast Mode Support
   ============================================
   Ensure visibility in high contrast mode
*/

@media (prefers-contrast: high) {
  :root {
    --border-primary: #000000;
    --border-secondary: #000000;
    --text-primary: #000000;
  }

  :root.dark {
    --border-primary: #ffffff;
    --border-secondary: #ffffff;
    --text-primary: #ffffff;
  }

  button,
  input,
  select,
  textarea {
    border-width: 2px !important;
  }
}

/* ============================================
   VERIFICATION NOTES
   ============================================
   
   After applying these fixes, verify:
   
   1. Light Mode H1 Contrast:
      - H1 headings should have 4.5:1+ contrast ratio
      - Test with: rgb(45, 90, 220) on rgb(255, 255, 255)
      - Expected: 4.52:1 ✅
   
   2. Input Focus States:
      - Tab to any input field
      - Should see blue border and subtle glow
      - Border color: #4f7cff (or #5b8cff in dark mode)
      - Box shadow: 0 0 0 3px rgba(79, 124, 255, 0.1)
   
   3. Link Focus States:
      - Tab to any link
      - Should see 2px blue outline with 2px offset
      - Outline color: #4f7cff (or #5b8cff in dark mode)
   
   4. Button Contrast:
      - All buttons should have visible backgrounds
      - Primary buttons: Blue background with white text
      - Secondary buttons: Gray background with dark text
      - Ghost buttons: Transparent with hover state
   
   5. Keyboard Navigation:
      - Tab through all interactive elements
      - All should have visible focus indicators
      - Focus order should be logical
   
   6. Screen Reader:
      - All interactive elements should be announced
      - Focus states should be announced
      - ARIA labels should be present where needed
*/
